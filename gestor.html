<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gestor de Pedidos - Cabana Açaí</title>
<style>
  body {
    font-family: Arial, sans-serif;
    line-height: 1.6;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f4;
  }
  h1, h2 {
    color: #333;
  }
  .orders-container {
    display: flex;
    justify-content: space-between;
  }
  .orders-column {
    flex: 1;
    padding: 10px;
    background-color: #fff;
    margin: 0 10px;
    border-radius: 5px;
  }
  .order-item {
    background: #f9f9f9;
    padding: 10px;
    margin-bottom: 10px;
    border-radius: 4px;
  }
  .order-item h3 {
    margin: 0;
    margin-bottom: 5px;
  }
  .order-item p {
    margin: 5px 0;
  }
  .btn {
    background: #333;
    color: #fff;
    padding: 5px 10px;
    border: none;
    border-radius: 4px;
    cursor: pointer;
  }
  .btn:hover {
    background: #444;
  }
</style>
</head>
<body>
<h1>Gestor de Pedidos - Cabana Açaí</h1>
<div class="orders-container">
  <div class="orders-column" id="preparing">
    <h2>Em preparo</h2>
  </div>
  <div class="orders-column" id="delivering">
    <h2>Saiu pra entrega</h2>
  </div>
  <div class="orders-column" id="completed">
    <h2>Finalizado</h2>
  </div>
</div>
<script>
  let orders = JSON.parse(localStorage.getItem('orders')) || [];

  function updateOrderStatus(orderId, newStatus) {
    const orderIndex = orders.findIndex(order => order.id === orderId);
    if (orderIndex !== -1) {
      orders[orderIndex].status = newStatus;
      localStorage.setItem('orders', JSON.stringify(orders));
      renderOrders();
    }
  }

  function renderOrders() {
    const preparingColumn = document.getElementById('preparing');
    const deliveringColumn = document.getElementById('delivering');
    const completedColumn = document.getElementById('completed');

    preparingColumn.innerHTML = '<h2>Em preparo</h2>';
    deliveringColumn.innerHTML = '<h2>Saiu pra entrega</h2>';
    completedColumn.innerHTML = '<h2>Finalizado</h2>';

    orders.forEach(order => {
      const orderElement = document.createElement('div');
      orderElement.className = 'order-item';
      orderElement.innerHTML = `
        <h3>Pedido #${order.id}</h3>
        <p><strong>Nome:</strong> ${order.name}</p>
        <p><strong>Endereço:</strong> ${order.address}</p>
        <p><strong>Telefone:</strong> ${order.phone}</p>
        <p><strong>Método de Pagamento:</strong> ${order.paymentMethod}</p>
        <p><strong>Total:</strong> R$ ${order.total.toFixed(2)}</p>
        <button class="btn" onclick="updateOrderStatus(${order.id}, '${order.status === 'preparing' ? 'delivering' : 'completed'}')">${order.status === 'preparing' ? 'Avançar' : 'Finalizar'}</button>
      `;

      if (order.status === 'preparing') {
        preparingColumn.appendChild(orderElement);
      } else if (order.status === 'delivering') {
        deliveringColumn.appendChild(orderElement);
      } else if (order.status === 'completed') {
        // Não exibe o pedido se estiver finalizado
      }
    });
  }

  window.addEventListener('storage', (event) => {
    if (event.key === 'orders') {
      orders = JSON.parse(event.newValue);
      renderOrders();
    }
  });

  // Inicializa a renderização dos pedidos
  renderOrders();
</script>
</body>
</html>
